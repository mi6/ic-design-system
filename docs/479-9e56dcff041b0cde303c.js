"use strict";(self.webpackChunkic_design_system=self.webpackChunkic_design_system||[]).push([[479],{60479:function(e,t,i){i.r(t),i.d(t,{ic_table_of_contents:function(){return d}});var n=i(28402),o=(i(79593),i(33276));i(92263),i(98514),i(21038),i(47044),i(8867),i(26974),i(89699),i(38726),i(91236);const s=e=>{const{id:t,className:i,label:o,target:s,selected:r,truncate:a,variant:c,position:l,size:h,updateSelected:d,setItemLevelOffset:f}=e;return(0,n.h)("a",{id:t,onClick:()=>d(l),class:`${r&&"table-of-contents-item-content-selected"}\n        ${"large"===h?"table-of-contents-item-content-large":"table-of-contents-item-content-default"}\n        ${i}\n       `,href:`#${s}`},(0,n.h)("ic-typography",{id:`${t}-label`,bold:r===l,class:`${a&&"truncated-item-text"}  ${h&&`table-of-contents-item-content-${h}`}\n          table-of-contents-item-label\n          `,style:{paddingLeft:f(c)}},o))},r=e=>{const t={setItemLevelOffset:e=>4+8*(parseInt(e.split("")[1])-2)+"px"};return(0,n.h)(s,Object.assign({},e,t))},a="table-of-contents-content",c="table-of-contents-list-items",l="table-of-contents-item-content",h="table-of-contents-section-container",d=class{constructor(e){(0,n.r)(this,e),this.heading="Contents",this.maximumHeadingLevel=3,this.monochrome=!1,this.position="right",this.setScrollHeight=50,this.size="medium",this.theme="inherit",this.truncate=!0,this.focusedElement=0,this.referenceElements=[],this.currentTargetHeights=[],this.headerHeight=0,this.initialPosition=this.position,this.suppressListener=!1,this.createTocItem=(e,t)=>{const i=`toc_${e.id}`,o=(0,n.h)(r,{id:i,className:l,variant:e.tagName.toLowerCase(),label:e.textLabel,target:e.id,truncate:this.truncate,selected:this.focusedElement,updateSelected:this.updateOnSelection,position:e.trueIndex,size:this.size}),s=this.truncate?(0,n.h)("ic-tooltip",{target:i,label:e.innerHTML},o):o;return(0,n.h)("li",{class:`table-of-contents-item  ${this.monochrome&&"table-of-contents-item-monochrome"}`},s,t?(0,n.h)("ol",null,t):null)},this.renderTocTree=e=>{let t;if(e.treeChildren.length>0){const i=e.treeChildren.map((e=>this.renderTocTree(e)));t=this.createTocItem(e,i)}else t=this.createTocItem(e);return t},this.updateOnSelection=e=>{this.suppressListener=!0,this.focusedElement=e,this.sidebarTranslation(this.focusedElement)},this.truncateText=()=>{var e,t;const i=null===(e=this.el.shadowRoot)||void 0===e?void 0:e.querySelectorAll(`.${l}`);(null===(t=this.el.shadowRoot)||void 0===t?void 0:t.querySelector(`.${c}`))&&(null==i||i.forEach((e=>{this.addTooltip(e,o.D.S)})))}}suppressListenerHandler(){window.scrollTo(0,window.scrollY-this.headerHeight-50)}generateHeadingTree(){var e;const t=[],i=this.maximumHeadingLevel<5?["h2","h3","h4","h5"].slice(0,(this.maximumHeadingLevel<2?2:this.maximumHeadingLevel)-1).join(","):"h2, h3, h4, h5",n=this.el.querySelectorAll(i);if(n){const i=Array.from(n);i.forEach(((e,t)=>{this.referenceElements.push(e),e.trueIndex=t,e.rank=e.tagName.toLowerCase().slice(1,2),e.textLabel=e.textContent?e.textContent.trimStart().split("\n")[0]:`${e.rank}-${t}`,e.treeChildren=[]}));let o=(null===(e=i[0])||void 0===e?void 0:e.rank)||2;i.reverse().forEach(((e,n)=>{e.id||e.setAttribute("id",e.textLabel.replace(/\s+/g,"-").toLowerCase()),e.rank>o&&e.trueIndex>0?i[n]&&i[n].rank<e.rank?i[n].treeChildren.unshift(e):t.push(e):(o=e.rank,t.push(e))}))}return t.reverse()}containerPosition(){var e;if(this.position){const t=null===(e=this.el.shadowRoot)||void 0===e?void 0:e.querySelector(`.${h}`);switch(this.position){case"right":t.style.flexDirection="row-reverse";break;case"top":t.style.flexDirection="column"}}}sidebarTranslation(e){var t,i,n;const o=null===(t=this.el.shadowRoot)||void 0===t?void 0:t.querySelector(".table-of-contents-sidebar"),s=[];let r=0;null===(n=null===(i=this.el.shadowRoot)||void 0===i?void 0:i.querySelectorAll(`.${l}`))||void 0===n||n.forEach((e=>{null!==e&&s.push(e.offsetHeight)})),s.slice(0,e).forEach((e=>r+=e)),o.style.transform=`translateY(${r}px)`,o.style.height=`${s[e]}px`}findElementsHeights(){const e=[];this.referenceElements.forEach((t=>{e.push(t.getBoundingClientRect().top)})),this.currentTargetHeights=e}handleResizeBounds(){window.innerWidth<o.D.XL&&"top"!==this.initialPosition?(this.position="top",this.containerPosition()):window.innerWidth>o.D.XL&&"top"===this.position&&"right"===this.initialPosition&&(this.position="right",this.containerPosition()),this.findElementsHeights(),this.truncateText()}updateSelectedItemFromScroll(){const e=window.scrollY+window.innerHeight*(this.setScrollHeight/100);if(0===window.scrollY)this.focusedElement=0,this.sidebarTranslation(this.focusedElement);else if(e<this.currentTargetHeights[this.focusedElement]){const t=this.currentTargetHeights.slice(0,this.focusedElement),i=t.reduce(((i,n,o)=>Math.abs(n-e)<Math.abs(t[i]-e)?o:i),0);this.focusedElement=i,this.sidebarTranslation(this.focusedElement)}else if(e>this.currentTargetHeights[this.focusedElement]&&this.focusedElement!==this.currentTargetHeights.length){const t=this.currentTargetHeights.slice(this.focusedElement),i=t.reduce(((i,n,o)=>Math.abs(n-e)<Math.abs(t[i]-e)&&n<e?o:i),0);i+this.focusedElement!==this.focusedElement&&(this.focusedElement+=i,this.sidebarTranslation(this.focusedElement))}}findHeaderElement(){const e=document.querySelector("ic-page-header");if(e)return e.clientHeight;const t=document.querySelector("header");return t?t.clientHeight:0}addListMargin(){var e;const t=null===(e=this.el.shadowRoot)||void 0===e?void 0:e.querySelector(`.${a}`);null==t||t.style.setProperty("top",`${this.headerHeight}px`)}addTooltip(e,t){var i;const n=e.querySelector(".table-of-contents-item-label");if("IC-TOOLTIP"==(null===(i=e.parentNode)||void 0===i?void 0:i.tagName)){const i=e.parentNode;if((null==n?void 0:n.offsetWidth)<(null==n?void 0:n.scrollWidth)){const n=window.innerWidth<t?"bottom":"right"===this.position?"left":"right";i.setAttribute("disable-click",!1),i.setAttribute("disable-hover",!1),i.setAttribute("placement",n),i.setAttribute("target",e.id),i.setAttribute("style","overflow:hidden")}else i.setAttribute("disable-click",!0),i.setAttribute("disable-hover",!0)}}componentWillLoad(){this.resizeObserver=new ResizeObserver((()=>this.handleResizeBounds())),this.resizeObserver.observe(this.el)}componentDidRender(){document.addEventListener("scroll",(()=>{this.suppressListener?this.suppressListener=!1:this.updateSelectedItemFromScroll()})),this.containerPosition(),this.findElementsHeights(),this.sidebarTranslation(this.focusedElement)}async componentDidLoad(){this.focusedElement=0,this.headerHeight=this.findHeaderElement(),this.addListMargin(),this.truncateText(),this.findElementsHeights(),this.sidebarTranslation(this.focusedElement)}render(){const{heading:e,monochrome:t,position:i,size:o,theme:s}=this;return(0,n.h)(n.H,{key:"5d1f4ba671cf901f6e6f72f7df98fefacc7c3db4",class:{[`ic-theme-${s}`]:"inherit"!==s}},(0,n.h)("ic-section-container",{key:"7d3a5007e4d0ba8fc144cc2d9e14ef89f01178be",class:h,aligned:"full-width"},(0,n.h)("div",{key:"69edf4c87059ba61776b685cd2bfd2b9f60f7b84",role:"navigation",class:`${a} ${"top"===i&&"table-of-contents-position-top"}\n            ${"right"===i&&"table-of-contents-position-side"}`},(0,n.h)("ic-typography",{key:"4cb13c2d6ca0001d4797c31e1f71e39da9033ecf",class:`table-of-contents-heading ${o}`,variant:"subtitle-large"},e),(0,n.h)("div",{key:"1fcef1b52f25439c8d822cd33a0f5c33796088ee",class:"table-of-contents-list"},(0,n.h)("div",{key:"d070ed88664bce7838ef688387805e3433520b96",class:`table-of-contents-sidebar ${t&&"table-of-contents-sidebar-monochrome"}\n                ${o}\n                `}),(0,n.h)("ol",{key:"6623a7c7088786666e038697bcad5a06e6ec403a",class:c},this.generateHeadingTree().map((e=>this.renderTocTree(e)))))),(0,n.h)("slot",{key:"a34737b2579a7c02507719d3348a2cfa6857ed1c"})))}get el(){return(0,n.g)(this)}static get watchers(){return{suppressListener:["suppressListenerHandler"]}}};d.style=":host{display:block;border:none;max-height:100vh}.table-of-contents-section-container{display:flex}.table-of-contents-content{top:0;left:0;padding:0 var(--ic-space-md);font:var(--ic-color-text-primary);max-height:100vh;z-index:1}:host .table-of-contents-position-top{min-width:10rem;max-width:50rem}:host .table-of-contents-position-side{min-width:8rem;max-width:20rem;width:20rem;position:sticky}.table-of-contents-list{display:flex;flex-direction:row;max-width:inherit}:host ol{list-style:none;margin-block-start:0;padding-inline-start:0}.table-of-contents-list-items{display:flex;flex-direction:column;width:100%}.table-of-contents-sidebar{background-color:var(--ic-table-of-contents-banner);height:1.75rem;min-width:0.25rem}.table-of-contents-sidebar-monochrome{background-color:var(--ic-table-of-contents-banner-monochrome)}.table-of-contents-item{min-height:1.5rem;line-height:1.5rem}.table-of-contents-item-content:hover{background-color:var(--ic-table-of-contents-hover)}.table-of-contents-item-monochrome-content:hover{background-color:var(--ic-table-of-contents-hover-monochrome)}.table-of-contents-item-content{border:none;max-width:inherit;display:flex;align-items:center;text-decoration:none;position:relative;color:var(--ic-table-of-contents-text);min-height:1.5rem;--ic-typography-color:var(--ic-table-of-contents-text)}.table-of-contents-item-content-default{padding-top:var(--ic-space-xxxs);padding-bottom:var(--ic-space-xxxs)}.table-of-contents-item-content:focus{box-shadow:var(--ic-border-focus);border-radius:var(--ic-border-radius);transition:var(--ic-transition-duration-fast);outline:none;background-color:var(--ic-table-of-contents-hover)}.table-of-contents-item-content:active{box-shadow:var(--ic-border-focus);border-radius:var(--ic-border-radius);transition:var(--ic-transition-duration-fast);outline:none;background-color:var(--ic-table-of-contents-pressed)}.truncated-item-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.table-of-contents-item-content-large{padding-top:var(--ic-space-xxs);padding-bottom:var(--ic-space-xxs)}.table-of-contents-sidebar.large{height:2.5rem}.table-of-contents-heading.large{padding-bottom:var(--ic-space-xs)}@media (prefers-reduced-motion: no-preference){.table-of-contents-sidebar{transition:all 0.3s ease}}@media (prefers-reduced-motion: reduce){.table-of-contents-sidebar{transition:none}}@media (forced-colors: active){.table-of-contents-sidebar{background-color:Highlight}}"}}]);