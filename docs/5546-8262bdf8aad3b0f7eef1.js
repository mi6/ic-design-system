"use strict";(self.webpackChunkic_design_system=self.webpackChunkic_design_system||[]).push([[5546],{35546:function(e,t,i){i.r(t),i.d(t,{ic_tree_view:function(){return h}});var r=i(28402),s=i(33276),a=i(21024);i(79593),i(64187),i(38726);var n=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(i[r[s]]=e[r[s]])}return i};let c=0;const h=class{constructor(e){(0,r.r)(this,e),this.treeViewId="ic-tree-view-"+c++,this.treeItemTag="IC-TREE-ITEM",this.hostMutationObserver=null,this.isLoaded=!1,this.resizeObserver=null,this.TOOLTIP="ic-tooltip",this.previousTruncateHeading=!1,this.previousTruncateTreeItems=!1,this.smallDevice=!1,this.heading="",this.size="medium",this.theme="inherit",this.treeItemData=[],this.truncateHeading=!1,this.truncateTreeItems=!1,this.hostMutationCallback=e=>{var t;null===(t=this.hostMutationObserver)||void 0===t||t.disconnect(),(0,s.a)(e,"icon",this),this.setTreeItems(),this.createMutationObserver()},this.createMutationObserver=()=>{this.hostMutationObserver=new MutationObserver((e=>{this.hostMutationCallback(e)})),this.hostMutationObserver.observe(this.el,{childList:!0,subtree:!0})},this.runResizeObserver=()=>{this.resizeObserver=new ResizeObserver((()=>{const e=(0,s.v)()<=s.D.S;this.smallDevice!==e&&(this.smallDevice=e)})),this.resizeObserver.observe(document.body)},this.removeTruncation=()=>{this.truncateHeading=!1,this.truncateTreeItems=!1},this.handleKeyDown=e=>{var t,i;const r=this.treeItems.indexOf(this.treeItems.filter((e=>e===document.activeElement))[0]),s=null===(t=this.treeItems[r])||void 0===t?void 0:t.expanded;switch(e.key){case"ArrowDown":this.treeItems[this.getNextItemToSelect(r,!0)].setFocus(),r!==this.treeItems.length-1&&e.preventDefault();break;case"ArrowUp":this.treeItems[this.getNextItemToSelect(r,!1)].setFocus(),0!==r&&e.preventDefault();break;case"ArrowRight":this.treeItems[r].isParent&&!s?(this.treeItems[r].expanded=!0,this.treeItems[r].hasParentExpanded=!0,this.treeItems[r].updateAriaLabel()):this.treeItems[r].isParent&&s&&this.treeItems[r].children[0].setFocus(),e.preventDefault();break;case"ArrowLeft":this.treeItems[r].isParent&&s?(this.treeItems[r].expanded=!1,this.treeItems[r].hasParentExpanded=!1,this.treeItems[r].updateAriaLabel()):(null===(i=this.treeItems[r].parentElement)||void 0===i?void 0:i.tagName)===this.treeItemTag&&this.treeItems[r].parentElement.setFocus(),e.preventDefault()}},this.getNextItemToSelect=(e,t)=>{var i;const r=this.treeItems.length-1;e<1&&(e=0);let s=t?e+1:e-1;s<0?s=0:s>r&&(s=r);const a=r+1;let n=0;for(;n<a;){if(s<0||s>r)return e;if((null===(i=this.treeItems[s].parentElement)||void 0===i?void 0:i.tagName)!==this.treeItemTag||this.treeItems[s].parentElement.expanded&&this.treeItems[s].offsetHeight>0)return s;if(s===r&&this.treeItems[s].disabled)return e;s=t?s+1:s-1,n++}return e},this.linkTreeItems=()=>{this.treeItems.forEach((e=>{e.setAttribute("context-id",this.treeViewId)}))},this.setTreeItems=()=>{this.treeItems=this.getAllTreeItems(this.el),this.linkTreeItems()},this.truncateTreeViewHeading=()=>{var e,t;const i=null===(e=this.el.shadowRoot)||void 0===e?void 0:e.querySelector(".tree-view-header"),r=null==i?void 0:i.closest(this.TOOLTIP),s=null===(t=this.el.shadowRoot)||void 0===t?void 0:t.querySelector(".heading-area-container");if(i&&s&&i.scrollHeight>s.clientHeight&&(i.classList.add("ic-text-overflow"),!r)){const e=document.createElement("ic-tooltip");e.setAttribute("target",this.el.id),e.setAttribute("label",i.textContent),e.classList.add("ic-tooltip-overflow"),e.setAttribute("placement","right"),s.appendChild(e),e.appendChild(i)}},this.removeHeadingTruncation=()=>{var e,t,i;const r=null===(e=this.el.shadowRoot)||void 0===e?void 0:e.querySelector(".tree-view-header"),s=null==r?void 0:r.closest(this.TOOLTIP);s&&r&&(r.classList.remove("ic-text-overflow"),null===(i=null===(t=this.el.shadowRoot)||void 0===t?void 0:t.querySelector(".heading-area-container"))||void 0===i||i.replaceChild(r,s))},this.isHeadingDefined=()=>(0,s.w)(this.heading)&&null!==this.heading,this.hasHeadingAreaContent=()=>(0,s.i)(this.el,"heading")||this.isHeadingDefined()||(0,s.i)(this.el,"icon")}watchSmallDeviceHandler(){this.smallDevice?(this.previousTruncateHeading=this.truncateHeading,this.previousTruncateTreeItems=this.truncateTreeItems,this.removeTruncation()):(this.truncateHeading=this.previousTruncateHeading,this.truncateTreeItems=this.previousTruncateTreeItems)}watchSizeHandler(){this.treeItems.forEach((e=>{e.size=this.size}))}watchThemeHandler(){this.treeItems.forEach((e=>{e.theme=this.theme}))}watchTreeItemOptionsHandler(){this.setTreeItems()}watchTruncateTreeItemsHandler(){this.treeItems.forEach((e=>{this.smallDevice?(e.previousTruncateTreeItem=e.truncateTreeItem,e.truncateTreeItem=this.truncateTreeItems):e.truncateTreeItem=e.previousTruncateTreeItem}))}disconnectedCallback(){var e,t;null===(e=this.hostMutationObserver)||void 0===e||e.disconnect(),null===(t=this.resizeObserver)||void 0===t||t.disconnect()}componentWillLoad(){this.setTreeItems(),this.previousTruncateHeading=this.truncateHeading,this.previousTruncateTreeItems=this.truncateTreeItems,(0,s.f)(this.runResizeObserver),this.watchSizeHandler(),this.watchThemeHandler(),this.treeItems.forEach((e=>{void 0===e.truncateTreeItem&&(e.truncateTreeItem=this.truncateTreeItems)}))}componentDidRender(){this.truncateHeading?this.truncateTreeViewHeading():this.removeHeadingTruncation()}componentDidLoad(){this.createMutationObserver(),this.isLoaded=!0}handleTreeItemSelected(e){this.treeItems.forEach((t=>{t.selected&&t.id!==e.detail.id&&(t.selected=!1)}))}getAllTreeItems(e){const t=[],i=e=>{Array.from(e.children).forEach((e=>{e.tagName===this.treeItemTag&&t.push(e),i(e)}))},r=(e,i)=>{Array.from(i.children).forEach((e=>{e.tagName===this.treeItemTag&&i.removeChild(e)})),e.forEach((e=>{const s=document.createElement(this.treeItemTag),{children:c,icon:h}=e,o=n(e,["children","icon"]);if(Object.assign(s,o),h){const e=document.createElement("div");e.setAttribute("slot","icon"),e.innerHTML=(0,a.s)(h),s.appendChild(e)}i.appendChild(s),t.push(s),c&&c.length>0&&r(c,s)}))};return this.treeItemData.length>0?r(this.treeItemData,e):i(e),t}render(){const{heading:e,isLoaded:t,size:i,theme:a,truncateHeading:n}=this;return(0,r.h)(r.H,{key:"8eb6b4a2b6572b986549e5a997bc5a9df0a8052f","context-id":this.treeViewId,class:{[`ic-tree-view-${i}`]:"medium"!==i,[`ic-theme-${a}`]:"inherit"!==a,"ic-tree-view-truncate":n},onKeyDown:this.handleKeyDown,"aria-label":this.isHeadingDefined()?e:null},this.hasHeadingAreaContent()&&(0,r.h)("div",{key:"0e4d5516ffe8df51a3e1d23355a6798502fd2afb",class:"heading-area-container"},(0,s.i)(this.el,"icon")&&(0,r.h)("div",{key:"b6a6f6ab4a6de241301d8bc2ccd776795cf11444",class:"icon-container"},(0,r.h)("slot",{key:"c92eff87acaea0ecc5008dd46347ab4f3676e999",name:"icon"})),(0,r.h)("ic-typography",{key:"e250086864a60f85befcc622635a9054dce8ba74",variant:"subtitle-large",class:{"tree-view-header":!0,"with-padding":this.truncateHeading&&!t}},(0,s.i)(this.el,"heading")?(0,r.h)("slot",{name:"heading"}):e)),(0,r.h)("slot",{key:"0c6e6ceb5017d2c0380af31e7c652a422d0cf2d8"}))}get el(){return(0,r.g)(this)}static get watchers(){return{smallDevice:["watchSmallDeviceHandler"],size:["watchSizeHandler"],theme:["watchThemeHandler"],treeItemData:["watchTreeItemOptionsHandler"],truncateTreeItems:["watchTruncateTreeItemsHandler"]}}};h.style=':host{display:block;width:var(--tree-view-width, 100%);background-color:var(--ic-tree-view-background)}:host .heading-area-container{border-bottom:var(--ic-space-1px) solid var(--ic-tree-view-divider);display:flex;align-items:center;min-height:calc(\n    var(--ic-space-xl) + var(--ic-space-xs) - var(--ic-space-1px)\n  );padding:0 var(--ic-space-xs);--ic-typography-color:var(--ic-tree-view-text)}:host(.ic-tree-view-small) .heading-area-container{min-height:calc(var(--ic-space-xl) - var(--ic-space-1px))}:host(.ic-tree-view-large) .heading-area-container{min-height:calc(var(--ic-space-xxl) - var(--ic-space-1px))}:host(.ic-tree-view-truncate) .heading-area-container{height:calc(var(--ic-space-xl) + var(--ic-space-xs) - var(--ic-space-1px))}:host(.ic-tree-view-truncate.ic-tree-view-small) .heading-area-container{height:calc(var(--ic-space-xl) - var(--ic-space-1px))}:host(.ic-tree-view-truncate.ic-tree-view-large) .heading-area-container{height:calc(var(--ic-space-xxl) - var(--ic-space-1px))}.icon-container{width:var(--ic-space-lg);min-width:var(--ic-space-lg);height:var(--ic-space-lg);margin:0 var(--ic-space-xs) 0 0}:host(.ic-tree-view-small) .icon-container{margin:0 var(--ic-space-xxs) 0 0}.ic-text-overflow{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.ic-tooltip-overflow{overflow:hidden}.tree-view-header.with-padding{padding-right:var(--ic-space-xs)}.tree-items-container-hidden{visibility:hidden}::slotted([slot="icon"]){fill:var(--ic-tree-view-icon)}@media (forced-colors: active){::slotted([slot="icon"]){fill:currentcolor}}'}}]);