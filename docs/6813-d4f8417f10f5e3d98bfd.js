"use strict";(self.webpackChunkic_design_system=self.webpackChunkic_design_system||[]).push([[6813],{36813:function(t,e,s){s.r(e),s.d(e,{ic_tab_context:function(){return h}});var a=s(28402);const i="context-id",h=class{constructor(t){(0,a.r)(this,t),this.icTabSelect=(0,a.c)(this,"icTabSelect",3),this.newTabPanels=[],this.newTabs=[],this.activationType="automatic",this.contextId="default",this.monochrome=!1,this.theme="inherit",this.linkTabs=()=>{this.tabs.forEach(((t,e)=>{const s=`ic-tab-${e}-context-${this.contextId}`,a=`ic-tab-panel-${e}-context-${this.contextId}`;t.setAttribute("id",s),t.tabId=`ic-tab--${e}-context-${this.contextId}`,t.tabPosition=e,t.setAttribute("aria-controls",a),this.tabPanels[e].setAttribute("id",a),this.tabPanels[e].setAttribute("aria-labelledby",s),this.contextId&&(t.setAttribute(i,this.contextId),this.tabGroup&&this.tabGroup.setAttribute(i,this.contextId),this.tabPanels[e].setAttribute(i,this.contextId)),t.theme=this.theme,this.tabPanels[e].theme=this.theme,this.tabGroup&&(this.tabGroup.theme=this.theme)}))},this.getChildren=()=>{var t;this.tabGroup=this.el.querySelector("ic-tab-group"),this.tabs=Array.from((null===(t=this.tabGroup)||void 0===t?void 0:t.querySelectorAll("ic-tab"))||[]),this.tabPanels=Array.from(this.el.children).filter((t=>"IC-TAB-PANEL"===t.tagName)),this.enabledTabs=this.getEnabledTabs()},this.keydownHandler=t=>{const e="manual"===this.activationType,s=this.enabledTabs.findIndex((t=>t.tabId===this.tabs[e?this.focusedTabIndex:this.selectedTab||0].tabId)),a=e?this.keyboardFocusTab:this.keyboardSelectTab;let i=!0;switch(t.key){case"Home":a(0);break;case"End":a(this.enabledTabs.length-1);break;case"ArrowRight":a(s<this.enabledTabs.length-1?s+1:0);break;case"ArrowLeft":a((s>0?s:this.enabledTabs.length)-1);break;default:!e||"Enter"!==t.key&&" "!==t.key?i=!1:this.keyboardSelectTab(this.focusedTabIndex)}i&&t.preventDefault()},this.setInitialTab=()=>{if(void 0!==this.selectedTabIndex)this.selectedTab=this.selectedTabIndex,this.focusedTabIndex=this.selectedTabIndex;else{const t=this.tabs.findIndex((t=>t.tabId===this.enabledTabs[0].tabId));this.selectedTab=t,this.focusedTabIndex=t}},this.configureTabs=()=>{this.enabledTabs.forEach((t=>{t.selected=t.tabPosition===this.selectedTab})),this.tabPanels.forEach(((t,e)=>{t.active=e===this.selectedTab}))},this.getEnabledTabs=()=>Array.from(this.tabs).filter((t=>!t.disabled)),this.keyboardSelectTab=t=>{var e,s;const a=this.tabs.findIndex((e=>e.tabId===this.enabledTabs[t].tabId));this.enabledTabs[t].focus(),void 0===this.selectedTabIndex?this.selectedTab=a:this.icTabSelect.emit({tabIndex:a,tabLabel:(null===(s=null===(e=this.el.querySelectorAll("ic-tab")[a])||void 0===e?void 0:e.textContent)||void 0===s?void 0:s.trim())||""})},this.keyboardFocusTab=t=>{this.enabledTabs[t].focus(),this.focusedTabIndex=this.tabs.findIndex((e=>e.tabId===this.enabledTabs[t].tabId))}}updateSelectedTab(t){this.selectedTab=t}watchMonochromeHandler(){this.tabs.forEach(((t,e)=>{t.monochrome=this.monochrome,this.tabPanels[e].monochrome=this.monochrome})),this.tabGroup&&(this.tabGroup.monochrome=this.monochrome)}watchThemeHandler(){this.tabs.forEach(((t,e)=>{t.theme=this.theme,this.tabPanels[e].theme=this.theme})),this.tabGroup&&(this.tabGroup.theme=this.theme)}componentDidLoad(){void 0!==this.selectedTabIndex&&(this.selectedTab=this.selectedTabIndex),this.getChildren(),this.linkTabs(),this.tabGroup&&this.tabGroup.addEventListener("keydown",this.keydownHandler),this.setInitialTab(),this.configureTabs()}componentWillUpdate(){this.configureTabs()}disconnectedCallback(){var t;null===(t=this.tabGroup)||void 0===t||t.removeEventListener("keydown",this.keydownHandler)}tabClickHandler(t){var e,s;void 0===this.selectedTabIndex&&t.detail.contextId===this.contextId&&(this.selectedTab=t.detail.position),this.icTabSelect.emit({tabIndex:t.detail.position,tabLabel:(null===(s=null===(e=this.el.querySelectorAll("ic-tab")[t.detail.position])||void 0===e?void 0:e.textContent)||void 0===s?void 0:s.trim())||""}),t.stopImmediatePropagation()}tabCreatedHandler(t){this.tabs&&this.tabPanels&&((t.detail.setFocus?this.newTabs:this.newTabPanels).push(t.detail),this.newTabs.length===this.newTabPanels.length&&(this.tabs.push(...this.newTabs),this.tabPanels.push(...this.newTabPanels),this.enabledTabs=this.getEnabledTabs(),this.linkTabs(),!this.selectedTab||this.tabs[this.selectedTab]&&this.tabPanels[this.selectedTab]||this.setInitialTab(),this.configureTabs(),this.newTabs=[],this.newTabPanels=[]))}tabEnabledHandler(){this.enabledTabs=this.getEnabledTabs()}async tabRemovedHandler(t){this.getChildren(),this.linkTabs(),this.selectedTab&&this.tabs[this.selectedTab]&&this.tabPanels[this.selectedTab]?this.tabs[this.selectedTab].selected=!0:this.setInitialTab(),t&&this.selectedTab&&this.tabs[this.selectedTab].setFocus()}render(){return(0,a.h)("slot",{key:"83e9c882369eebc5fd170b2ceabf423047cd14d6"})}get el(){return(0,a.g)(this)}static get watchers(){return{selectedTabIndex:["updateSelectedTab"],monochrome:["watchMonochromeHandler"],theme:["watchThemeHandler"]}}}}}]);